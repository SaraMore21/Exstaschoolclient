
<ngx-ui-loader></ngx-ui-loader>

<div class="card row">
  <h1 style="text-align: center;">משתמשים</h1>
  <div style="text-align: center;">
    <p-table #tb [value]="userService.ListUserByListSchoolAndYerbook" dir="rtl" [filterDelay]="0" [scrollable]="true" scrollHeight="100vh"
      [globalFilterFields]="['index','tz','firstName','lastName','TelephoneNumber1','schoolName']">
      <ng-template pTemplate="caption">
        <button style="margin-left: 72%;" pButton pRipple type="button" (click)="AddUser()">הוספת משתמש</button>
        <p-button
        pRipple
        type="button"
        label=" יצוא לקובץ EXCEL"
        (click)="sendToExportExcel()"
        icon="pi pi-file-excel"
        class=" p-button-outline p-button-success"></p-button>

        <span class="p-input-icon-left">
          <i class="pi pi-search;"></i>


          <input pInputText type="text" (input)="tb.filterGlobal($event.target.value, 'contains')"
            placeholder="חיפוש" />
        </span>
      </ng-template>
      <ng-template pTemplate="header">
        <tr>
          <th pSortableColumn="index"> # <p-sortIcon field="index"></p-sortIcon></th>
          <th pSortableColumn="tz">תז <p-sortIcon field="tz"></p-sortIcon>
          </th>
          <th pSortableColumn="lastName">שם משפחה <p-sortIcon field="lastName"></p-sortIcon>
          </th>
          <th pSortableColumn="firstName">שם פרטי <p-sortIcon field="firstName"></p-sortIcon>
          </th>
          <th pSortableColumn="schoolName">מוסד<p-sortIcon field="schoolName"></p-sortIcon>
          </th>
          <!-- <th pSortableColumn="TelephoneNumber1">טלפון <p-sortIcon field="TelephoneNumber1"></p-sortIcon></th> -->

          <th></th>
        </tr>
      </ng-template>
      <ng-template pTemplate="body" let-user let-r="rowIndex">
        <tr class="tr" (click)="EditDetailsUser(user.iduser,user.schoolId)">
          <td>{{user.index}}</td>
          <td>{{user.tz}}</td>
          <td>{{user.lastName}}</td>
          <td>{{user.firstName}}</td>
          <td>{{user.schoolName}}</td>

          <!-- <td>{{user.TelephoneNumber1}}</td> -->
          <td style="text-align: center">
            <button pButton pRipple type="button" icon="pi pi-pencil" (click)="EditDetailsUser(user.iduser,user.schoolId)"
              class="p-button-rounded p-button-text"></button>

              <button pButton pRipple type="button" icon="pi pi-book" tooltipPosition="top" pTooltip="מסמכים"
              (click)="GoToDocumentsPerUser(user)" class="p-button-rounded p-button-text"></button>

            <button pButton pRipple type="button" icon="pi pi-trash" (click)="DeletUser(user,$event)"
              class="p-button-rounded p-button-text"></button>
          </td>
        </tr>
      </ng-template>
    </p-table>
  </div>
</div>




<div style="text-align: center;">
<p-toast position="top-center" ></p-toast>
</div>
<p-confirmDialog dir="rtl" [style]="{width: '30%'}" [baseZIndex]="10000"></p-confirmDialog>
